{% extends 'base.html.twig' %}

{% block title %}- Evènement{% endblock %}

{% block body %}

<div class="title">
    <h1>
        {{ event.date ? event.date|date('d M Y - H:i') : ''  }}</br>
        {% for raid in event.raid %}
        {{ raid.name }}
        {% endfor %}
    </h1>
    <h2><a href="{{ event.log }}">Warcraftlogs</a></br></h2>
</div>
<div class="container">



    <div class="left-container">
        <table class="table">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Type</th>
                    <th>Raid</th>
                    <th>Joueur</th>
                </tr>
            </thead>
            <tbody>
                {# Pour l'évènement en cours, je veux chaque item récupéré, son type, son raid d'appartenance, le joueur qui l'a récupéré #}
                {% for lootHistories in event.lootHistories %}
                <tr>
                    <td>{{lootHistories.item.name }}</td>
                    <td>{{lootHistories.item.type }}</td>
                    <td>{{lootHistories.item.raid.name }}</td>
                    <td>{{lootHistories.player.name}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="right-container">
        <table class="table">
            <thead>
                <tr>
                    <th>Joueur</th>
                    <th>Statut</th>
                </tr>
            </thead>
            <tbody>
                {% for participations in event.participations %}
                <tr>
                    <td>{{participations.player.name }}</td>
                    {% if participations.isBench == 1 %}
                        <td>Présent</td>
                    {% else %}
                        <td>Bench</td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {# <div>
            <a class="bottom-button-update" href="{{ path('app_event_create_participation') }}"class="button-top-add" title="Ajouter"><i class="bi bi-plus-circle"></i> Ajouter une participation</a>
        </div> #}
    </div>
</div>
<div class="bottom-button d-flex flex-wrap justify-content-evenly">
    <a class="bottom-button-update" href="{{ path('app_event_update', {'id': event.id}) }}">Modifier l'évènement</a>      
    <a class="bottom-button-back" href="{{ path('app_event_list') }}">Retour</a>
    {{ include('event/_delete_form.html.twig') }}
</div>
{% endblock %}